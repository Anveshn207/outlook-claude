# KurweBall — Context Summary

## Session Summary
- **Date**: 2026-02-19
- **Project**: KurweBall — Unified Recruiting Platform (ATS + CRM)
- **Location**: `C:\Outlook Claude\Kurweball`
- **Branch**: master

### Accomplished This Session
1. **Bench Sales Module — Full CRUD** — Built complete new module from scratch:
   - Prisma model `BenchSalesSubmission` with 34 fields (mentor removed per user request) based on Airtable "All Records.csv" (37 columns originally, minus mentor + 2 renamed)
   - Migrations: `20260219173712_add_bench_sales_submissions` and `20260219175037_remove_mentor_rename_fields`
   - NestJS module: controller (8 endpoints), service (CRUD + filters + bulk import/delete), DTOs (create, update, query)
   - Frontend page at `/bench-sales` with DataTable, search, filter dropdowns (Status, Consultant, Vendor, Client), column visibility toggles (9/34 default visible), pagination, row selection, bulk delete
   - Sidebar nav entry with TrendingUp icon
   - RBAC permissions: `bench-sales:read/create/update/delete` for all roles
   - Popover UI component added (`@radix-ui/react-popover`)

2. **Data import then removal** — Imported 6,386 records from CSV, then cleared all per user request (they only wanted the fields/structure, not the data)

3. **Bug fix** — Fixed `apiFetch` usage in bench-sales page (was calling `res.json()` on already-parsed response)

4. **Previous session work** (from context summary):
   - Admin-only task deletion
   - Smart auto-import system with 40+ field aliases
   - 4 new Candidate fields (applicantId, state, dateOfBirth, resumeAvailable)
   - Airtable data extraction to Excel

### Key Files Created/Modified
**New files (Bench Sales module):**
- `apps/api/prisma/migrations/20260219173712_add_bench_sales_submissions/`
- `apps/api/prisma/migrations/20260219175037_remove_mentor_rename_fields/`
- `apps/api/src/modules/bench-sales/bench-sales.module.ts`
- `apps/api/src/modules/bench-sales/bench-sales.controller.ts`
- `apps/api/src/modules/bench-sales/bench-sales.service.ts`
- `apps/api/src/modules/bench-sales/dto/create-bench-sales.dto.ts`
- `apps/api/src/modules/bench-sales/dto/update-bench-sales.dto.ts`
- `apps/api/src/modules/bench-sales/dto/query-bench-sales.dto.ts`
- `apps/api/src/modules/bench-sales/seed-bench-sales.ts` (can be deleted — was for one-time import)
- `apps/web/src/app/(dashboard)/bench-sales/page.tsx`
- `apps/web/src/components/ui/popover.tsx`

**Modified files:**
- `apps/api/prisma/schema.prisma` — Added BenchSalesSubmission model + Tenant relation
- `apps/api/src/app.module.ts` — Registered BenchSalesModule
- `apps/api/src/modules/auth/rbac/permissions.ts` — Added bench-sales permissions to all roles
- `apps/web/src/lib/permissions.ts` — Added bench-sales permissions
- `apps/web/src/components/layout/sidebar.tsx` — Added Bench Sales nav entry with TrendingUp icon

### What Needs To Be Done Next
1. Clean up temp files (seed-bench-sales.ts, filter-bench.js, create-bench-excel.js, list-windows.ps1, screenshot-*.png)
2. Update candidate detail/edit pages to show new fields (applicantId, state, dateOfBirth, resumeAvailable)
3. Add bench sales export functionality
4. Deploy to Hetzner (65.108.218.222 — SSH port firewalled)
5. Test the "2 Issues" shown in bottom-left badge on the frontend

### Database Users
| Name | Email | Password | Role |
|------|-------|----------|------|
| Anvesh N | anvesh.n@engineeringsquare.us | Admin123$ | ADMIN |
| Mounica A (Hr) | Hr@engineeringsquare.us | Test1234$ | MANAGER |
| Saikumar | saikumar@engineeringsquare.us | Test1234$ | MANAGER |
| Sarah Johnson | sarah@acme.com | password123 | RECRUITER |
| Mike Davis | mike@acme.com | password123 | RECRUITER |

## Resume Instructions
1. Read this file + `memory/MEMORY.md`
2. Start API: `cd apps/api && node --require @swc-node/register src/main.ts`
3. Start frontend: `cd apps/web && npm run dev`
4. Bench Sales page is at http://localhost:3000/bench-sales (empty — fields only, no data)
5. Next: clean up temp files, then work on candidate detail pages for new fields
