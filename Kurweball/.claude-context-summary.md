# KurweBall — Context Summary

## Session Summary
- **Date**: 2026-02-24 (latest session)
- **Project**: KurweBall — Unified Recruiting Platform (ATS + CRM)
- **Location**: `C:\Outlook Claude\Kurweball`
- **Branch**: master
- **Latest commit**: `c8b322a` — Add filtered export: pass search, status, and LinkedIn filters to export

### Accomplished This Session (Latest)
1. **Filtered exports** — ExportDropdown now accepts `filters` prop. All 6 DataTable-based pages (candidates, jobs, clients, interviews, tasks, bench-sales) pass their active status/search filters so exports only include filtered data.
2. **LinkedIn filter for candidates** — Added `hasLinkedin` boolean to `QueryCandidatesDto`, candidates service, and `ExportQueryDto`. LinkedIn icon next to candidate name in table. "Has LinkedIn" dropdown filter in toolbar.
3. **Fixed 2,005 broken candidate names** — "Ownership" column was AI-mapped to `lastName` during import. Wrote fix script matching by email from 11 uploaded source files. 2,005/2,005 fixed.
4. **Import enhancements** — Multi-file upload (`POST /import/upload-bulk`), file management UI (list/delete/re-import previously uploaded files).
5. **Full candidate export** — Expanded from 10 to 21 columns (added Applicant ID, State, Visa Status, LinkedIn URL, Rate, Rate Type, etc.)
6. **DataTable onSearchChange** — New callback prop exposes debounced search to parent pages for export filtering.
7. **Export toast feedback** — Shows which filters were applied or "No filters — exported all records."

### Accomplished Previous Sessions
- Export for ALL 8 dashboard sections (CSV/XLSX/DOCX)
- Interview delete button (RBAC-gated)
- Smart Import E2E tested (AI field mapping works)
- SSE cleanup verified (already done)

### Key Files Modified This Session
**Backend (5 files):**
- `apps/api/src/modules/import-export/dto/export-query.dto.ts` — added `hasLinkedin` boolean field
- `apps/api/src/modules/import-export/export.controller.ts` — passes `hasLinkedin` to service
- `apps/api/src/modules/import-export/export.service.ts` — accepts/applies `hasLinkedin` filter; 21-column candidate export
- `apps/api/src/modules/import-export/import.controller.ts` — file list/delete/reparse/bulk-upload endpoints
- `apps/api/src/modules/import-export/import.service.ts` — listUploadedFiles, deleteUploadedFile, reparseFile

**Frontend (8 files):**
- `apps/web/src/components/shared/export-dropdown.tsx` — accepts `filters` prop, appends to URL, toast notifications
- `apps/web/src/components/shared/data-table.tsx` — `onSearchChange` callback prop
- `apps/web/src/app/(dashboard)/candidates/page.tsx` — LinkedIn icon/filter, searchTerm, filters to ExportDropdown
- `apps/web/src/app/(dashboard)/jobs/page.tsx` — searchTerm, filters to ExportDropdown
- `apps/web/src/app/(dashboard)/clients/page.tsx` — searchTerm, filters to ExportDropdown
- `apps/web/src/app/(dashboard)/interviews/page.tsx` — searchTerm, filters to ExportDropdown
- `apps/web/src/app/(dashboard)/tasks/page.tsx` — searchTerm, filters to ExportDropdown
- `apps/web/src/app/(dashboard)/bench-sales/page.tsx` — debouncedSearch + statusFilter to ExportDropdown

### What Needs To Be Done Next
1. **User to verify filtered export** — Hard-refresh browser (Ctrl+Shift+R) and test export with filters applied
2. **Deploy to Hetzner** (65.108.218.222) — BLOCKED: SSH port firewalled, need to whitelist IP first
3. **Pipeline/Team pages** — Don't pass filters (no filter state to pass)

### Database Users
| Name | Email | Password | Role |
|------|-------|----------|------|
| Anvesh N | anvesh.n@engineeringsquare.us | Admin123$ | ADMIN |
| Mounica A (Hr) | Hr@engineeringsquare.us | Test1234$ | MANAGER |
| Saikumar | saikumar@engineeringsquare.us | Test1234$ | MANAGER |
| Sarah Johnson | sarah@acme.com | Test1234$ | RECRUITER |
| Mike Davis | mike@acme.com | Test1234$ | RECRUITER |

## Resume Instructions
1. Read this file + `memory/MEMORY.md`
2. Start API: `cd apps/api && node --require @swc-node/register src/main.ts`
3. Start frontend: `cd apps/web && npm run dev`
4. Next priority: Deploy to Hetzner (need SSH access first)
5. All export endpoints work with filters (verified via curl). All pages have ExportDropdown.
