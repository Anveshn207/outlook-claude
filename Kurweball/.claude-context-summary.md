# Kurweball — Context Summary

## Session Summary
- **Date**: 2026-02-11
- **Project**: Kurweball — Unified Recruiting Platform (ATS + CRM + Airtable-lite)
- **Location**: `C:\Outlook Claude\Kurweball`

### Accomplished This Session
- **Fixed critical CORS bug**: `FRONTEND_URL="http://localhost:3002"` in `apps/api/.env` was blocking all frontend requests from port 3000. Changed to `http://localhost:3000`.
- **Improved CORS config**: Updated `apps/api/src/main.ts` to support comma-separated origins in `FRONTEND_URL` env var (splits on comma instead of using as single string).
- **Fixed screenshot script**: Updated `screenshot-all-pages.js` to inject both `auth_token` AND `auth_user` into localStorage (fixes Team page "Access Denied" in automated screenshots).
- **Verified all 16 pages load with real data**: Dashboard (6 jobs, 11 candidates, 10 submissions), Candidates (15 rows), Jobs (8), Clients (5), Pipeline kanban, Interviews (5), Reports with charts, Team page accessible, all detail pages working.

### What Needs to Be Done Next
1. **Team page shows empty table**: The `/users` endpoint may not be returning users correctly — investigate query. The page itself works (no more "Access Denied").
2. **"1 Issue" badge on Team page**: Next.js dev mode shows 1 issue — investigate console error.
3. Consider Sprint 8+ features (real-time notifications, email integration, bulk actions, mobile polish).

### Key Decisions
- CORS fix: Changed env var rather than removing it, plus made main.ts support comma-separated origins for flexibility.

## Technical State

### Files Modified This Session
- `apps/api/.env` — Changed `FRONTEND_URL` from `localhost:3002` to `localhost:3000`
- `apps/api/src/main.ts` — CORS now splits `FRONTEND_URL` on commas for multiple origins
- `screenshot-all-pages.js` — Injects `auth_user` alongside `auth_token` into localStorage
- `debug-browser.js` — Created: Playwright debug script (can be deleted, diagnostic only)

### Running Services
- API: `cd apps/api && node --require @swc-node/register src/main.ts` (port 3001)
- Frontend: `cd apps/web && npm run dev` (port 3000)
- Login: admin@acme.com / password123
- CRITICAL: Use `node --require @swc-node/register` for API (NOT tsx)

### Sprint Status
- Sprints 1-7 COMPLETE (15 API modules, 19 routes, ~165 files)
- All data loading correctly in frontend after CORS fix

## Resume Instructions
1. Read this file first
2. Read memory: `C:\Users\E2 Training\.claude\projects\C--Outlook-Claude\memory\kurweball-progress.md`
3. Start API: `cd "C:\Outlook Claude\Kurweball\apps\api" && node --require @swc-node/register src/main.ts`
4. Start frontend: `cd "C:\Outlook Claude\Kurweball\apps\web" && npm run dev`
5. All pages working — CORS bug is fixed
6. Next: investigate Team page empty table + "1 Issue" badge
