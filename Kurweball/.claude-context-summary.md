# KurweBall — Context Summary

## Session Summary
- **Date**: 2026-02-13 (evening session — UI Polish + Invites + Permissions Planning)
- **Project**: KurweBall — Unified Recruiting Platform (ATS + CRM)
- **Location**: `C:\Outlook Claude\Kurweball`

### Accomplished This Session
1. **Disabled Next.js dev indicator** — Added `devIndicators: false` to `next.config.ts` (removes "N" circle badge in bottom-left)
2. **Updated landing page slogan** — Changed "Hire Smarter, not harder" → "Hire Smarter, Scale Faster" with gradient on both "Smarter" and "Faster"
3. **Created test invite** — test@example.com (RECRUITER) + saikumar@engineeringsquare.us (MANAGER) invites created via API
4. **Verified invite system** — Delete works correctly (only deletes targeted invite), pending invites card shows/hides properly
5. **Investigated invite link sharing** — Tunnel URL returns 200, register page loads, token validates. Issue likely URL breaking in messaging apps.

### Currently In Progress
- **Configurable Role Permissions** — Was in plan mode exploring how to let admins customize MANAGER/RECRUITER permissions. Exploration complete, plan not yet written.
  - Current state: Permissions are hardcoded in TypeScript (47 permissions, 4 roles)
  - No database table for role-permission mapping
  - Existing `/roles` page shows read-only permission matrix
  - Need: DB-backed `RolePermission` model, API endpoints, editable UI on roles page

### What Needs To Be Done Next
1. **Fix invite link sharing** — User reports person can't open the link. Tunnel returns 200 from server. Need to verify with the user what error the recipient sees.
2. **Implement Configurable Permissions** (was planning):
   - Add `RolePermission` model to Prisma schema
   - Create API service + controller for CRUD on role permissions
   - Update `RolesGuard` to check DB permissions (with fallback to defaults)
   - Make roles page interactive — admin can toggle permissions for MANAGER/RECRUITER
   - Include permissions in JWT or fetch on login
3. **E2E Testing** — User reported "lot of errors" but testing was interrupted for permissions work
4. **Deploy to Hetzner** — SSH port still firewalled (65.108.218.222)

### Key Decisions
- `devIndicators: false` in next.config.ts to hide Next.js badge
- Gradient applied to both "Smarter" and "Faster" in landing slogan
- Invite system works correctly — both invites show on Team page, delete is per-invite
- Admin login: anvesh.n@engineeringsquare.us / Admin123$

## Technical State

### Files Modified This Session
- `apps/web/next.config.ts` — Added `devIndicators: false`
- `apps/web/src/app/page.tsx` — Updated slogan + gradient on "Faster"

### Key Files for Permissions Feature (read during planning)
- `apps/web/src/lib/permissions.ts` — Frontend permission definitions (47 permissions, 4 roles)
- `apps/api/src/modules/auth/rbac/permissions.ts` — API permission definitions (mirror of frontend)
- `apps/api/src/modules/auth/rbac/roles.guard.ts` — RolesGuard checks `hasPermission(role, permission)`
- `apps/web/src/app/(dashboard)/roles/page.tsx` — Read-only permission matrix UI (already built)
- `apps/web/src/hooks/use-permissions.ts` — Frontend `usePermissions()` hook
- `apps/api/prisma/schema.prisma` — No RolePermission model yet

### Build Status
- Frontend: Running on port 3000 (background task bc8c04e)
- API: Running on port 3001 (background task b90bbb3)
- Cloudflare tunnel: Running → https://flows-mae-slip-summary.trycloudflare.com
- Git: master branch, latest commit `0f943ee`, pushed

### Pending Invites
- saikumar@engineeringsquare.us (MANAGER) — token: d020b4102767bf3254c93bc053151afbaba8c2ea20ef354f0a4aab89b6abfb9f
- test@example.com was deleted by user

## Resume Instructions
1. Read this file + `memory/MEMORY.md`
2. Both servers should be running (API on 3001, frontend on 3000). Restart if needed.
3. Tunnel URL changes on restart: `"C:\Program Files (x86)\cloudflared\cloudflared.exe" tunnel --url http://localhost:3000`
4. **Priority 1**: Ask user what error the invite recipient sees, fix if needed
5. **Priority 2**: Write and implement the configurable permissions plan (DB model + API + UI)
6. **Priority 3**: Run E2E tests to find the errors user mentioned
7. Registration requires invite links — open registration disabled after first user
