# Kurweball — Context Summary

## Session Summary
- **Date**: 2026-02-11 (latest session)
- **Project**: Kurweball — Unified Recruiting Platform (ATS + CRM + Airtable-lite)
- **Location**: `C:\Outlook Claude\Kurweball`

### Accomplished This Session
- Sprint 7 was already complete from prior session (Notifications, Team, Interviews UI, Analytics & Exports)
- Created `screenshot-all-pages.js` Playwright automation script
- Captured 16 screenshots of all pages at 1920x1080 resolution
- Screenshots saved to `C:\Outlook Claude\Kurweball\screenshots\`

### Bugs Discovered — NEEDS FIXING
1. **Data not loading in frontend** — All tables show empty/zero despite seeded DB data. API returns data via direct curl, but frontend pages show empty. Root cause: the JWT token is likely not being sent by apiFetch, or there's a tenant context mismatch. The `apiFetch` in `apps/web/src/lib/api.ts` uses `auth_token` key in localStorage.
2. **Team page shows "Access Denied"** — admin@acme.com is ADMIN but page shows access denied. Related to token issue.
3. **Detail pages show "not found"** — Entity IDs from API don't resolve in browser. Same root cause.
4. **Next.js "N Issues" badge** — 1-4 issues on every page. Console errors need investigation.
5. **All likely same root cause** — apiFetch failing silently, returning 401.

### Next Steps (Priority Order)
1. Debug data loading: check browser console, verify auth_token flow in apiFetch
2. Re-seed database if needed: `cd apps/api && npx prisma db seed`
3. Re-take screenshots once data loads
4. Consider Sprint 8+ features

## Technical State

### Files Created This Session
- `screenshot-all-pages.js` — Playwright script (token injection, all 16 pages)
- `screenshots/*.png` — 16 screenshots

### Sprint Status
- Sprints 1-7 COMPLETE (15 API modules, 19 routes, ~165 files)
- No new features this session — screenshot/verification only

### Running Services
- API: `cd apps/api && node --require @swc-node/register src/main.ts` (port 3001)
- Frontend: `cd apps/web && npm run dev` (port 3000)
- Login: admin@acme.com / password123
- CRITICAL: Use `node --require @swc-node/register` for API (NOT tsx)

## Resume Instructions
1. Read this file first
2. Read memory: `C:\Users\E2 Training\.claude\projects\C--Outlook-Claude\memory\kurweball-progress.md`
3. Start API: `cd "C:\Outlook Claude\Kurweball\apps\api" && node --require @swc-node/register src/main.ts`
4. Start frontend: `cd "C:\Outlook Claude\Kurweball\apps\web" && npm run dev`
5. **PRIMARY BUG**: Data not loading in frontend. Debug apiFetch auth flow.
6. Check `apps/web/src/lib/api.ts` — uses `localStorage.getItem("auth_token")`
7. Check login page stores token correctly after POST /api/auth/login
