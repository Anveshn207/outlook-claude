# Kurweball — Context Summary

## Session Summary
- **Date**: 2026-02-12
- **Project**: Kurweball — Unified Recruiting Platform (ATS + CRM + Airtable-lite)
- **Location**: `C:\Outlook Claude\Kurweball`

### Accomplished This Session
- **Sprint 8 COMPLETE**: AI-Powered Data Import + Multi-Format Export
- **Backend**: 12 new files in `apps/api/src/modules/import-export/`:
  - File parser service (xlsx library for CSV/XLSX/XLS)
  - AI mapping service (heuristic fuzzy matching + optional Claude API)
  - Export service (CSV, XLSX, DOCX for all 4 entities)
  - Import service (3-step: upload → analyze → execute with batch Prisma transactions)
  - Import controller (3 POST endpoints) + Export controller (4 GET endpoints)
  - Types, DTOs, module shell
- **Frontend**: 4 new components + 5 modified pages:
  - ExportDropdown, ImportDialog (4-step wizard), ColumnMappingTable, Import page
  - Import/Export buttons wired into Candidates, Jobs, Clients pages
  - Sidebar + AppShell updated with Import nav item
- **Dependencies**: @anthropic-ai/sdk, xlsx, docx added to API
- **Verified**: API starts with 17 modules, frontend builds clean with 20 routes
- **Fixed**: 3 pre-existing lint errors (unused imports in interviews, notifications, team pages)

### What Needs to Be Done Next
1. Sprint 9+ features: Real-time notifications (WebSocket/SSE), email integration, bulk actions
2. End-to-end testing of import/export flows in browser
3. Add ANTHROPIC_API_KEY to .env for AI-powered column mapping (currently uses heuristic fallback)
4. Deployment to Hetzner

### Key Decisions
- Built AI mapping with heuristic fallback (no API key needed) — upgrades to Claude API when ANTHROPIC_API_KEY is set
- Used xlsx library for both parsing imports and generating Excel exports
- Used docx library for Word document exports

## Technical State

### Files Created This Session (16 new files)
- `apps/api/src/modules/import-export/types/import.types.ts`
- `apps/api/src/modules/import-export/import-export.module.ts`
- `apps/api/src/modules/import-export/dto/upload-import.dto.ts`
- `apps/api/src/modules/import-export/dto/analyze-mapping.dto.ts`
- `apps/api/src/modules/import-export/dto/execute-import.dto.ts`
- `apps/api/src/modules/import-export/dto/export-query.dto.ts`
- `apps/api/src/modules/import-export/file-parser.service.ts`
- `apps/api/src/modules/import-export/ai-mapping.service.ts`
- `apps/api/src/modules/import-export/export.service.ts`
- `apps/api/src/modules/import-export/import.service.ts`
- `apps/api/src/modules/import-export/import.controller.ts`
- `apps/api/src/modules/import-export/export.controller.ts`
- `apps/web/src/components/shared/export-dropdown.tsx`
- `apps/web/src/components/shared/import-dialog.tsx`
- `apps/web/src/components/shared/column-mapping-table.tsx`
- `apps/web/src/app/(dashboard)/import/page.tsx`

### Files Modified This Session
- `apps/api/package.json` — Added @anthropic-ai/sdk, xlsx, docx
- `apps/api/src/app.module.ts` — Added ImportExportModule
- `apps/web/src/app/(dashboard)/candidates/page.tsx` — Import/Export buttons
- `apps/web/src/app/(dashboard)/jobs/page.tsx` — Import/Export buttons
- `apps/web/src/app/(dashboard)/clients/page.tsx` — Import/Export buttons
- `apps/web/src/components/layout/sidebar.tsx` — Added Import nav item
- `apps/web/src/components/layout/app-shell.tsx` — Added /import page title
- `apps/web/src/app/(dashboard)/interviews/page.tsx` — Fixed unused var lint error
- `apps/web/src/app/(dashboard)/notifications/page.tsx` — Fixed unused import lint error
- `apps/web/src/app/(dashboard)/team/page.tsx` — Fixed unused import lint error

### Running Services
- API: `cd apps/api && node --require @swc-node/register src/main.ts` (port 3001)
- Frontend: `cd apps/web && npm run dev` (port 3000)
- Login: admin@acme.com / password123
- CRITICAL: Use `node --require @swc-node/register` for API (NOT tsx)

### Sprint Status
- Sprints 1-8 COMPLETE (17 API modules, 20 routes, ~182 files)

## Resume Instructions
1. Read this file first
2. Read memory: `C:\Users\E2 Training\.claude\projects\C--Outlook-Claude\memory\kurweball-progress.md`
3. Start API: `cd "C:\Outlook Claude\Kurweball\apps\api" && node --require @swc-node/register src/main.ts`
4. Start frontend: `cd "C:\Outlook Claude\Kurweball\apps\web" && npm run dev`
5. Next: Sprint 9 planning or E2E testing of import/export
