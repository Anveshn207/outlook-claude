# KurweBall — Context Summary

## Session Summary
- **Date**: 2026-02-19
- **Project**: KurweBall — Unified Recruiting Platform (ATS + CRM)
- **Location**: `C:\Outlook Claude\Kurweball`
- **Branch**: master

### Accomplished This Session
1. **Add Record Dialog** — Manual data entry form with all fields in 2-column grid, Consultant required
2. **View/Edit Record Dialog** — Click any table row to open detail view. Footer: Delete (red), Edit, Close. Edit mode switches to editable form. Empty fields hidden in view mode.
3. **Horizontal Scrolling Fix** — Added `min-w-0` to flex containers in `app-shell.tsx`, `overflow-x-hidden` on `<main>`, raw `<table>` instead of Table component wrapper, `overflow-hidden` on Card
4. **Removed mentor fields** — Removed `mentorsReview` and `mentorsEmail` from all files
5. **Added `clientRound` field** — New field replacing `cloud`. Migration `20260219200000_add_client_round_remove_fields`
6. **Removed `cloud`, `rating`, `notes`, `codingRequired`** — Dropped from schema, DTOs, service, frontend
7. **RBAC: Admin-only edit/delete for bench sales** — Only ADMIN has bench-sales:create/update/delete. MANAGER/RECRUITER get bench-sales:read only (admin can grant more via Roles settings page). Frontend `can()` checks already hide buttons for unauthorized users.
8. **Test record** — "Rajesh Kumar" record still exists in DB

### Key Files Modified
- `apps/web/src/app/(dashboard)/bench-sales/page.tsx` — View/Edit dialog, clickable rows, scroll fix, field changes
- `apps/web/src/components/layout/app-shell.tsx` — `min-w-0` on flex containers, `overflow-x-hidden` on main
- `apps/api/prisma/schema.prisma` — Removed cloud/rating/notes/codingRequired/mentorsReview/mentorsEmail, added clientRound
- `apps/api/prisma/migrations/20260219200000_add_client_round_remove_fields/` — New migration
- `apps/api/src/modules/bench-sales/dto/create-bench-sales.dto.ts` — Field changes
- `apps/api/src/modules/bench-sales/bench-sales.service.ts` — Field changes in bulkImport
- `apps/api/src/modules/auth/rbac/permissions.ts` — MANAGER/RECRUITER no longer have bench-sales:create/update/delete
- `apps/web/src/lib/permissions.ts` — RECRUITER_PERMISSIONS no longer has bench-sales:create/update

### Current Bench Sales Fields (28 total)
consultant (required), vendor, client, position, status, interviewType, billingRate, workLocation, submissionDate, submissionBy, submissionType, name, recruiter, batch, clientRound, startTime, endTime, interviewKind, duration, interviewerName, vendorEmail, vendorPhone, vendorContactName, projectDuration, jobDuties, comments, resume, uniqueSubmissionId, vendorScreening

### What Needs To Be Done Next
1. Delete the test "Rajesh Kumar" record
2. Clean up temp files (seed-bench-sales.ts, screenshot-*.png, etc.)
3. Update candidate detail/edit pages for new fields
4. Deploy to Hetzner (65.108.218.222)

### Database Users
| Name | Email | Password | Role |
|------|-------|----------|------|
| Anvesh N | anvesh.n@engineeringsquare.us | Admin123$ | ADMIN |
| Mounica A (Hr) | Hr@engineeringsquare.us | Test1234$ | MANAGER |
| Saikumar | saikumar@engineeringsquare.us | Test1234$ | MANAGER |
| Sarah Johnson | sarah@acme.com | password123 | RECRUITER |
| Mike Davis | mike@acme.com | password123 | RECRUITER |

## Resume Instructions
1. Read this file + `memory/MEMORY.md`
2. Start API: `cd apps/api && node --require @swc-node/register src/main.ts`
3. Start frontend: `cd apps/web && npm run dev`
4. Bench Sales at http://localhost:3000/bench-sales (1 test record)
5. Next: delete test record, clean temp files, then candidate detail pages
