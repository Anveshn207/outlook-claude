# Kurweball — Context Summary

## Session Summary
- **Date**: 2026-02-11
- **Project**: Kurweball — Unified Recruiting Platform (ATS + CRM + Airtable-lite)
- **Location**: `C:\Outlook Claude\Kurweball`

### Accomplished (Sprint 1 — COMPLETE)
- Initialized monorepo (npm workspaces + Turborepo) with root configs
- Scaffolded NestJS API (`apps/api`) with full auth module (JWT login/register/refresh/me)
- Scaffolded Next.js 15 frontend (`apps/web`) with Tailwind v4 + shadcn/ui components
- Created shared types package (`packages/shared`) with all entity types + constants
- Wrote full Prisma schema: 18 models, 13 enums (Tenants, Users, Candidates, Jobs, Clients, Contacts, Submissions, PipelineTemplates, PipelineStages, SubmissionStageHistory, Interviews, Resumes, Attachments, Activities, Tasks, CustomFields, SavedViews)
- Built app shell: dark sidebar, navbar, 8 dashboard pages with demo data (Dashboard, Candidates, Jobs, Clients, Pipeline/Kanban, Reports, Settings)
- Created 876-line seed script with realistic demo data (15 candidates, 8 jobs, 5 clients, 10 submissions, etc.)
- Installed PostgreSQL 16 locally via winget (service: postgresql-x64-16, auto-start)
- Ran Prisma migration (`20260211192809_init`) — all 18 tables created
- Seeded database with full demo data
- Fixed NestJS JWT v11 type issues (exported AuthResponse/AuthTokens, cast expiresIn)
- Verified: Frontend serves all pages (HTTP 200), API auth endpoints work with JWT
- Installed Docker Desktop (but WSL2 needs admin + reboot — not needed for dev)

### In Progress
- Nothing partially done — Sprint 1 is 100% complete

### Next Steps (Sprint 2: Core Entities CRUD)
1. Build CRUD API modules for Candidates, Jobs, Clients, Contacts, Submissions
2. Wire frontend pages to real API data (replace hardcoded demo data)
3. Build reusable DataTable component with server-side pagination/sort/filter
4. Custom fields system: settings page to manage fields + dynamic rendering on forms/lists
5. Submission flow: submit candidate to job, pipeline stage management

### Key Decisions
- **Hybrid data model**: Fixed schema tables + JSONB `custom_data` column for Airtable-lite flexibility
- **PostgreSQL local** instead of Docker (WSL2 not available without admin)
- **NestJS** for backend (structured modules for large app)
- **Tailwind v4** with `@theme` directive for design tokens
- **Zustand** for frontend state management
- **CUID** for all primary keys (Prisma default)

### Bugs/Issues
- Docker Desktop installed but WSL2 backend needs admin privileges + reboot to enable
- NestJS JWT v11 has stricter types — `expiresIn` needs cast to `any`

## Technical State

### Files Created (66 source files)
**Root (7):** package.json, turbo.json, docker-compose.yml, .env.example, .env, .gitignore, tsconfig.base.json

**apps/api (18):**
- package.json, tsconfig.json, nest-cli.json, .env
- prisma/schema.prisma, prisma/seed.ts
- src/main.ts, src/app.module.ts
- src/prisma/prisma.service.ts, src/prisma/prisma.module.ts
- src/config/env.validation.ts
- src/modules/auth/auth.module.ts, auth.service.ts, auth.controller.ts
- src/modules/auth/dto/register.dto.ts, login.dto.ts
- src/modules/auth/strategies/jwt.strategy.ts
- src/modules/auth/guards/jwt-auth.guard.ts
- src/modules/auth/decorators/current-user.decorator.ts

**apps/web (28):**
- package.json, tsconfig.json, next.config.ts, postcss.config.mjs
- src/app/globals.css, layout.tsx, page.tsx
- src/app/(auth)/layout.tsx, login/page.tsx, register/page.tsx
- src/app/(dashboard)/layout.tsx
- src/app/(dashboard)/dashboard/page.tsx, candidates/page.tsx, jobs/page.tsx, clients/page.tsx, pipeline/page.tsx, reports/page.tsx, settings/page.tsx
- src/components/layout/sidebar.tsx, navbar.tsx, app-shell.tsx
- src/components/ui/button.tsx, input.tsx, card.tsx, badge.tsx
- src/lib/api.ts, utils.ts
- src/stores/auth-store.ts

**packages/shared (13):**
- package.json, tsconfig.json
- src/index.ts, src/types/index.ts
- src/types/auth.ts, candidate.ts, job.ts, client.ts, submission.ts, activity.ts, custom-field.ts, common.ts
- src/constants/index.ts

### Database
- PostgreSQL 16 on localhost:5432
- DB: kurweball, User: kurweball, Pass: kurweball_dev
- 18 tables created via Prisma migration
- Seeded with demo data

### Dependencies
- NestJS 11, Next.js 15, React 19, Prisma 6, Tailwind v4
- @nestjs/jwt, @nestjs/passport, passport-jwt, bcrypt
- zustand, lucide-react, class-variance-authority, @radix-ui/*

## Resume Instructions
1. Read this file first
2. Read the plan: `C:\Users\E2 Training\.claude\plans\mighty-pondering-sketch.md`
3. Read memory: `C:\Users\E2 Training\.claude\projects\C--Outlook-Claude\memory\kurweball-progress.md`
4. Verify services: `curl http://localhost:3000` (frontend) and `curl -X POST http://localhost:3001/api/auth/login -H "Content-Type: application/json" -d '{"email":"admin@acme.com","password":"password123"}'` (API)
5. If services aren't running: `cd apps/web && npx next dev --port 3000` and `cd apps/api && npx nest start`
6. Begin Sprint 2: CRUD API modules for Candidates, Jobs, Clients
