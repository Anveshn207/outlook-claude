# KurweBall — Context Summary

## Session Summary
- **Date**: 2026-02-19
- **Project**: KurweBall — Unified Recruiting Platform (ATS + CRM)
- **Location**: `C:\Outlook Claude\Kurweball`
- **Branch**: master

### Accomplished This Session
1. **Sticky Consultant Column** — Consultant column is now frozen/sticky on the left (left-10 after checkbox) with `border-r` divider. Uses `bg-card` (fully opaque) so scrolling content doesn't show through.
2. **Column Drag-and-Drop Reordering** — Non-consultant columns can be reordered by dragging table headers. State: `columnOrder` and `draggedCol`. Consultant is excluded from reordering (always first).
3. **Resume File Upload** — New "Attach Resume" button on create/edit forms. Accepts PDF, DOC, DOCX, TXT, RTF (max 10MB). Files uploaded to `./uploads/bench-sales/` via `POST /api/bench-sales/upload-resume`. Resume stored as `fileName|/uploads/bench-sales/xxx` format. View dialog shows download link.
4. **Sticky Column Background Fix** — Changed from semi-transparent `bg-muted/30` to fully opaque `bg-card` and `bg-muted` for all sticky cells (header, data, skeleton). Hover uses `group-hover:bg-muted` (opaque).
5. **Static File Serving** — Added `app.useStaticAssets()` in main.ts to serve `/uploads/*` directory. Changed NestFactory type to `NestExpressApplication`.
6. **apiFetch FormData Support** — Updated `apps/web/src/lib/api.ts` to skip `Content-Type: application/json` header when body is FormData (for file uploads).

### Key Files Modified
- `apps/web/src/app/(dashboard)/bench-sales/page.tsx` — Sticky consultant, drag reorder, file upload UI, opaque backgrounds
- `apps/web/src/components/layout/app-shell.tsx` — (from prior session) min-w-0 on flex containers
- `apps/web/src/lib/api.ts` — FormData support in apiFetch
- `apps/api/src/modules/bench-sales/bench-sales.module.ts` — MulterModule for file uploads
- `apps/api/src/modules/bench-sales/bench-sales.controller.ts` — `POST upload-resume` endpoint
- `apps/api/src/main.ts` — Static file serving for uploads, NestExpressApplication type
- `apps/api/src/modules/auth/rbac/permissions.ts` — (prior session) RBAC for bench-sales
- `apps/web/src/lib/permissions.ts` — (prior session) Frontend RBAC mirror

### Current Bench Sales Fields (28 total)
consultant (required), vendor, client, position, status, interviewType, billingRate, workLocation, submissionDate, submissionBy, submissionType, name, recruiter, batch, clientRound, startTime, endTime, interviewKind, duration, interviewerName, vendorEmail, vendorPhone, vendorContactName, projectDuration, jobDuties, comments, resume (file upload), uniqueSubmissionId, vendorScreening

### What Needs To Be Done Next
1. **Verify sticky column fix** — User reported seeing fields through sticky columns. Fix deployed but not yet visually verified.
2. **Verify resume file upload** — API restarted but upload endpoint not yet tested end-to-end.
3. Delete the test "Rajesh Kumar" record
4. Clean up temp files (seed-bench-sales.ts, screenshot-*.png, etc.)
5. Deploy to Hetzner (65.108.218.222)

### Database Users
| Name | Email | Password | Role |
|------|-------|----------|------|
| Anvesh N | anvesh.n@engineeringsquare.us | Admin123$ | ADMIN |
| Mounica A (Hr) | Hr@engineeringsquare.us | Test1234$ | MANAGER |
| Saikumar | saikumar@engineeringsquare.us | Test1234$ | MANAGER |
| Sarah Johnson | sarah@acme.com | password123 | RECRUITER |
| Mike Davis | mike@acme.com | password123 | RECRUITER |

## Resume Instructions
1. Read this file + `memory/MEMORY.md`
2. Start API: `cd apps/api && node --require @swc-node/register src/main.ts`
3. Start frontend: `cd apps/web && npm run dev`
4. Bench Sales at http://localhost:3000/bench-sales (1 test record: Rajesh Kumar)
5. Next: verify sticky column fix + resume upload work, then test with user
